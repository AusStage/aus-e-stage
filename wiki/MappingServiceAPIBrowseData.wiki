#summary Mapping Service API - Explaining the Browse Map Data API

<h1>Mapping Service API - Browse Map Data</h1>

The following documentation provides an overview of the API exposed by the MappingService which can be used to retrieve data used in the construction of of the [http://beta.ausstage.edu.au/mapping/browse.jsp Browse Map].

<wiki:toc max_depth="3" />

= Retrieve Marker Data =

Marker data is used to populate the browse map with venue markers

== Base URL ==

The base URL for the retrieval of marker data is as follows:

http://beta.ausstage.edu.au/mapping/browse?action=markers

== Request Type ==

Get Request

== Parameters ==

None.

== Sample Ouptut ==

http://beta.ausstage.edu.au/mapping/browse?action=marker

{{{
<markers>
    <marker cnt="85" fyear="1986" id="77" lat="-27.466764" lng="153.023776" lyear="2004"
        name="Suncorp Theatre" state="4"/>
    <marker cnt="561" fyear="1965" id="555" lat="-35.281282" lng="149.130596" lyear="2010"
        name="Canberra Theatre " state="7"/>
    <marker cnt="2" fyear="2001" id="13" lat="-37.773417" lng="144.96087" lyear="2001"
        name="Cornish Arms" state="6"/>
    <marker cnt="185" fyear="1900" id="76" lat="-37.810916" lng="144.969755" lyear="2008"
        name="Her Majesty's Theatre" state="6"/>
    ...
</markers>
}}}

= Lookup Additional Information =

Lookup the event list for a venue for use in populating an infoWindow in the map

== Base URL ==

The base URL for the lookup of additional information about a venue is

http://beta.ausstage.edu.au/mapping/browse?action=lookup

== Request Type ==

Get Request

== Parameters ==

|| *Name * || *Allowed Values* || *Optional* || *Default* ||
|| id      || Unique venue id  || No         ||           ||
|| start   || The start of the period of interest || Yes || All events ||
|| finish  || The end of the period of interest || Yes || All Events ||

_Note:_ The start and finish parameters define a time period during which an event must have occurred at the specified venue for it to be returned in the dataset 

== Sample Ouptut ==

http://beta.ausstage.edu.au/mapping/browse?action=lookup&id=77

{{{
<p>
  <a href="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&f_venue_id=77" title="More information on Venue" target="_blank">Suncorp Theatre</a>, Brisbane
</p>
<ul>
  <li><a href="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&f_event_id=60652" title="More information on event" target="_blank">The Amazing Magician</a>, 28 September 2004 - 30 September 2004</li>
  <li><a href="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&f_event_id=60647" title="More information on event" target="_blank">Cloudland</a>, 24 September 2004 - 02 October 2004</li>
  <li><a href="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&f_event_id=63497" title="More information on event" target="_blank">Sandakan Threnody</a>, 16 September 2004 - 18 September 2004</li>
  <li><a href="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&f_event_id=63439" title="More information on event" target="_blank">The Gigli Concert</a>, 03 September 2004 - 09 September 2004</li
  ...
</ul>
}}}

= Retrieve XML to build a Timeline =

Retrieve the XML that used to build a timeline using the [http://www.simile-widgets.org/timeline/ SIMILE Timeline Widget]

== Base URL ==

The base URL for the lookup of additional information about a venue is

http://beta.ausstage.edu.au/mapping/browse?action=timeline

== Request Type ==

Get Request

== Parameters ==

|| *Name * || *Allowed Values* || *Optional* || *Default* ||
|| id      || Unique venue id  || No         ||           ||
|| start   || The start of the period of interest || Yes || All events ||
|| finish  || The end of the period of interest || Yes || All Events ||

_Note:_ The start and finish parameters define a time period during which an event must have occurred at the specified venue for it to be returned in the dataset 

== Sample Ouptut ==

http://beta.ausstage.edu.au/mapping/browse?action=timeline&id=77

{{{
<data>
    <event end="30 September 2004 00:00:00 +0000" isDuration="true"
        link="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=60652"
        start="28 September 2004 00:00:00 +0000" title="The Amazing Magician"/>
    <event end="02 October 2004 00:00:00 +0000" isDuration="true"
        link="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=60647"
        start="24 September 2004 00:00:00 +0000" title="Cloudland"/>
    <event end="18 September 2004 00:00:00 +0000" isDuration="true"
        link="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=63497"
        start="16 September 2004 00:00:00 +0000" title="Sandakan Threnody"/>
    <event end="09 September 2004 00:00:00 +0000" isDuration="true"
        link="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=63439"
        start="03 September 2004 00:00:00 +0000" title="The Gigli Concert"/>
    <event end="10 October 1998 00:00:00 +0000" isDuration="true"
        link="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=25618"
        start="02 October 1998 00:00:00 +0000" title="Madam Butterfly"/>
    <event end="19 September 1998 00:00:00 +0000" isDuration="true"
        link="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=25593"
        start="15 September 1998 00:00:00 +0000" title="Streb"/>
    <event end="05 September 1998 00:00:00 +0000" isDuration="true"
        link="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=25305"
        start="27 August 1998 00:00:00 +0000" title="Anna Karenina"/>
    <event end="20 June 1998 00:00:00 +0000" isDuration="true"
        link="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=60284"
        start="04 June 1998 00:00:00 +0000" title="Honour"/>
    <event end="08 April 1998 00:00:00 +0000" isDuration="true"
        link="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=26258"
        start="04 April 1998 00:00:00 +0000" title="Fish"/>
    ...
</data>
}}}


= Export KML Version =

Export the KML version of the browse map

== Base URL ==

The base URL for the export of data in KML format is

http://beta.ausstage.edu.au/mapping/browse?action=kml

== Request Type ==

Get Request

== Parameters ==

None