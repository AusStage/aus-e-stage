#summary Mapping Service API - Explaining the Map Data API

<h1>Mapping Service API - Map Data</h1>

_Note 1: The Mapping Service is currently undergoing extensive revisions including the rewrite of much of the underlying code. Therefore functionality may not be available or behave differently dependant progress of the revision work._

_Note 2: Where an API has been successfully updated it will be noted in the documentation below._

The following documentation provides an overview of the API exposed by the MappingService which can be used to retrieve data used in the construction of the maps by [http://beta.ausstage.edu.au/mapping/organisations.jsp organisation] and [http://beta.ausstage.edu.au/mapping/contributors.jsp contributor] as well as the export of data in the KML format.

<wiki:toc max_depth="3" />

= Retrieve Marker Data =

Marker data is used to populate a map on a web page with markers representing venues where events have occurred that match the specified criteria.

== Base URL ==

The base URL for the retrieval of marker data is as follows:

http://beta.ausstage.edu.au/mapping/data?action=markers&

Combining this URL with the parameters outlined below retrieves data from the MappingService.

== Request Type ==

Get Request

== Parameters ==

|| *Name * || *Allowed Values* || *Optional* || *Default* ||
|| type    || [MappingServiceAPIMapData#Type:_organisation organisation], [MappingServiceAPIMapData#Type:_contributor contribtor]|| No || ||
|| id      || Unique contributor or organisation id ||	 No || ||

== Sample Ouptut ==

http://beta.ausstage.edu.au/mapping/data?action=markers&type=contributor&id=102

{{{
<mapdata>
    <markers>
        <marker events="1" fdate="19610224" fdatestr="1961-02-24" lat="-33.871828" ldate="19610224" ldatestr="1961-02-24" 
         lng="151.207599" name="Palace Theatre" postcode="2000" state="3" suburb="Sydney">
            &lt;p&gt;&lt;a href="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=1403"
            target="ausstage"&gt;Palace Theatre&lt;/a&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a
            href="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=102"
            target="ausstage"&gt;Walter Sullivan&lt;/a&gt;&lt;ul&gt;&lt;li&gt;&lt;a
            href="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=14805"
            target="ausstage"&gt;A Taste of Honey&lt;/a&gt;, 24 February
            1961&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;
        </marker>
        <marker events="1" fdate="19660825" fdatestr="1966-08-25" lat="-37.810916" ldate="19660825" ldatestr="1966-08-25" 
         lng="144.969755" name="Her Majesty's Theatre" postcode="3000" state="6" suburb="Melbourne">
            &lt;p&gt;&lt;a href="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=76"
            target="ausstage"&gt;Her Majesty's Theatre&lt;/a&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a
            href="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=102"
            target="ausstage"&gt;Walter Sullivan&lt;/a&gt;&lt;ul&gt;&lt;li&gt;&lt;a
            href="http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=61979"
            target="ausstage"&gt;Funny Girl&lt;/a&gt;, 25 August
            1966&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;
        </marker>
        ...
    </markers>       
</mapdata>
}}}

= Exporting KML data =

KML data is used to build a map in a GIS based application such as Google Earth.

== Base URL ==

The base URL for the KML export functionality is as follows:

http://beta.ausstage.edu.au/mapping/data?action=kml&

Combining this URL with the parameters outlined below retrieves data from the MappingService.

== Request Type ==

Get Request

== Parameters ==

|| *Name * || *Allowed Values* || *Optional* || *Default* ||
|| type    || [MappingServiceAPIMapData#Type:_organisation organisation], [MappingServiceAPIMapData#Type:_contributor contribtor]|| No || ||
|| id      || Unique contributor or organisation id ||	 No || ||

= Lookup Data Elements =

The Lookup API is used to lookup various pieces of information such an organisation name

== Request Type ==

Get Request

== Base URL ==

The base URL for the retrieval of marker data is as follows:

http://beta.ausstage.edu.au/mapping/data?action=lookup&

Combining this URL with the parameters outlined below retrieves data from the MappingService.

== Parameters ==

|| *Name * || *Allowed Values* || *Optional* || *Default* ||
|| type    || [MappingServiceAPIMapData#Type:_orgname orgname], [MappingServiceAPIMapData#Type:_orgname2 orgname2], [MappingServiceAPIMapData#Type:_contribname contribname], [MappingServiceAPIMapData#Type:_contribname2 contribname2]|| No || ||
|| id      || Unique contributor or organisation id ||	 No || ||

= Organisation Search =

Search the database for a list of organisations

== Request Type ==

Post Request

== Base URL ==

The base URL for the retrieval of marker data is as follows:

http://beta.ausstage.edu.au/mapping/data

Combining this URL with the parameters outlined below retrieves data from the MappingService.

== Parameters ==

|| *Name * || *Allowed Values* || *Optional* || *Default* ||
|| action  || organisation_search || No || ||
|| organisation_name || part of, or complete, organisation name to find || No || ||
|| operator       || [MappingServiceAPIMapData#Operator:_and and], [MappingServiceAPIMapData#Operator:_or or], [MappingServiceAPIMapData#Operator:_exact exact] ||	 No || ||
|| type || [MappingServiceAPIMapData#Type:_single single], [MappingServiceAPIMapData#Type:_multi multi] || Yes || single ||

= Contributor Search =

Search the database for a list of contributors

== Request Type ==

Post Request

== Base URL ==

The base URL for the retrieval of marker data is as follows:

http://beta.ausstage.edu.au/mapping/data

Combining this URL with the parameters outlined below retrieves data from the MappingService.

== Parameters ==

|| *Name * || *Allowed Values* || *Optional* || *Default* ||
|| action  || contributor_search || No || ||
|| contributor_name || part of, or complete, organisation name to find || No || ||
|| operator       || [MappingServiceAPIMapData#Operator:_and and], [MappingServiceAPIMapData#Operator:_or or], [MappingServiceAPIMapData#Operator:_exact exact] ||	 No || ||
|| type || [MappingServiceAPIMapData#Type:_single single], [MappingServiceAPIMapData#Type:_multi multi] || Yes || single ||

= Parameter Value Definitions =
The values of the parameters influences the way in which the API works, for example defining which records to use in constructing a dataset. These values are outlined below

== Type: organisation ==
Defines a request for marker data using organisation records

== Type:contributor ==
Defines a request for marker data using contributor records

== Type: orgname ==

Lookup the name of an organisation

== Type: orgname2 ==

Lookup the name of an organisation and only return the name if it has events that can be mapped

== Type: contribname ==

Lookup the name of a contributor

== Type: contribname2 ==

Lookup the name of a contributor and only return the name if it has events that can be mapped

== Operator: and ==

Undertake a search using the "and" operator. Meaning that _all_ of the terms in the search must be found.

== Operator: or ==

Undertake a search using the "or" operator. Meaning that _some_ of the terms in the search must be found.

== Operator: exact ==

Undertake a search using the exact phrase. Meaning that the name must match exactly, or that additional advanced search operators have been used

== Type: single ==

Format the search results to include user interface elements for adding a single contributor / organisation onto the map

== Type: multi ==

Format the search results to include user interface elements for adding multiple contributors / organisations onto the map