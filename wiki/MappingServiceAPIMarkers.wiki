#summary Mapping Service API - Marker Data

<h1>Marker Data</h1>

Components of the MappingService are exposed as an [http://en.wikipedia.org/wiki/Application_programming_interface API]. The intention of the API is to make it easier for developers to customise their own front end interfaces and to split the work equitably amongst the software engineers working on the Aus-e-Stage project. 

The Marker Data API exposes methods and data elements that can be used to construct a map on a web page. 

_Note: During development of the service revisions the API will use a temporary URL which will be changed once the service revisions are complete.

<wiki:toc max_depth="3" />

== Base URL ==

http://beta.ausstage.edu.au/mapping3/markers?

Combining the base URL with the parameters outlined below constructs a call to the API.

== Parameters ==

|| *Name*   || *Possible Values* || *Optional* || *Default* ||
|| type     || state, suburb, venue, organisation, contributor || No || ||
|| id       || Unique contributor or organisation id || No || ||
|| callback || function name to use for a JSONP request || Yes || || 


=== type ===

The type parameter specifies whether the call to the API is for data on venues at the state, suburb or specific venue. As well as data on venues associated with an organisation or a contributor

=== id ===

Valid State Identifiers are:

|| *id* || *State / Region* ||
|| 1 || SA ||
|| 2 || WA ||
|| 3 || NSW ||
|| 4 || QLD ||
|| 5 || TAS ||
|| 6 || VIC ||
|| 7 || ACT ||
|| 8 || NT ||
|| 99 || Australia ||
|| 999 || Outside Australia ||

If the task type is set to suburb the parameter is is expected to be encoded as follows:

state-id_suburb-name

For example:

1_Adelaide

For all other task types the id parameter is a comma separated list of unique identifiers.

_Note: It is not possible to mix types of ids in a single call to the API. Therefore if the type is set to venue only venue ids must be specified, conversely if the type is set to contributor only contributor ids must be specified._

== Sample Output ==

=== state ===

Retrieve markers for all venues in SA:

URL: http://beta.ausstage.edu.au/mapping3/markers?type=state&id=1

{{{
[ { "id" : "184",
    "latitude" : "-34.922921",
    "longitude" : "138.614116",
    "name" : "The Fringe Club",
    "postcode" : "5000",
    "street" : null,
    "suburb" : "Adelaide",
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=184"
  },
  { "id" : "11899",
    "latitude" : "-34.921044",
    "longitude" : "138.60502",
    "name" : "Unknown, The University of Adelaide",
    "postcode" : "5005",
    "street" : "The University of Adelaide",
    "suburb" : "Adelaide",
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=11899"
  },
...
 { "id" : "10403",
    "latitude" : "-34.923239",
    "longitude" : "138.605910",
    "name" : "Higher Ground",
    "postcode" : "5000",
    "street" : "Pulteney Street",
    "suburb" : "Adelaide",
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=10403"
  }
]
}}}

=== suburb ===

Retrieve markers for all venues in Adelaide, SA:

URL: http://beta.ausstage.edu.au/mapping3/markers?type=suburb&id=1_adelaide

{{{
[ { "id" : "184",
    "latitude" : "-34.922921",
    "longitude" : "138.614116",
    "name" : "The Fringe Club",
    "postcode" : "5000",
    "street" : null,
    "suburb" : "Adelaide",
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=184"
  },
  { "id" : "11899",
    "latitude" : "-34.921044",
    "longitude" : "138.60502",
    "name" : "Unknown, The University of Adelaide",
    "postcode" : "5005",
    "street" : "The University of Adelaide",
    "suburb" : "Adelaide",
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=11899"
  },
...
{ "id" : "10403",
    "latitude" : "-34.923239",
    "longitude" : "138.605910",
    "name" : "Higher Ground",
    "postcode" : "5000",
    "street" : "Pulteney Street",
    "suburb" : "Adelaide",
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=10403"
  }
]
}}}

=== venue ===

Retrieve a marker for "Her Majesty's Theatre" in Adelaide

URL: http://beta.ausstage.edu.au/mapping3/markers?type=venue&id=815

{{{
[ { "id" : "815",
    "latitude" : "-34.92832",
    "longitude" : "138.597007",
    "name" : "Her Majesty's Theatre",
    "postcode" : "5000",
    "street" : "58 Grote Street",
    "suburb" : "Adelaide",
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=815"
  } ]
}}}

=== organisation ==

Retrieve markers for venues where an event occurred involving the [http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&f_org_id=102 Australian Dance Theatre]

URL: http://beta.ausstage.edu.au/mapping3/markers?type=organisation&id=102

{{{
[ { "id" : 102,
    "venues" : [ { "id" : "302",
          "latitude" : "-34.919681",
          "longitude" : "138.597095",
          "name" : "The Space",
          "postcode" : "5000",
          "street" : "Adelaide Festival Centre,King William Street",
          "suburb" : "Adelaide",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=302"
        },
        { "id" : "555",
          "latitude" : "-35.281282",
          "longitude" : "149.130596",
          "name" : "Canberra Theatre ",
          "postcode" : "2608",
          "street" : "London Circuit",
          "suburb" : "Civic Square",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=555"
        },
...
 { "id" : "1414",
          "latitude" : "-27.466764",
          "longitude" : "153.023776",
          "name" : "SGIO Theatre",
          "postcode" : "4000",
          "street" : "179 Turbot Street",
          "suburb" : "Brisbane",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=1414"
        }
      ]
  } ]

}}}

=== contributor ===
Retrieve markers for venues where an event occurred involving [http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&f_contrib_id=482 Geoffrey Rush]

URL: http://beta.ausstage.edu.au/mapping3/markers?type=contributor&id=482

{{{
[ { "id" : 482,
    "venues" : [ { "id" : "302",
          "latitude" : "-34.919681",
          "longitude" : "138.597095",
          "name" : "The Space",
          "postcode" : "5000",
          "street" : "Adelaide Festival Centre,King William Street",
          "suburb" : "Adelaide",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=302"
        },
        { "id" : "106",
          "latitude" : "-33.751108",
          "longitude" : "150.696716",
          "name" : "Q Theatre",
          "postcode" : "2750",
          "street" : "Railway Street",
          "suburb" : "Penrith",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=106"
        },
...
 { "id" : "98",
          "latitude" : "-37.810308",
          "longitude" : "144.970033",
          "name" : "Comedy Theatre",
          "postcode" : "3000",
          "street" : "240 Exhibition Street",
          "suburb" : "Melbourne",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=98"
        }
      ]
  } ]
}}}

=== multiple contributor ===
Retrieve markers for venues where an event occurred involving [http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&f_contrib_id=482 Geoffrey Rush] or [http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&f_contrib_id=4921 Cate Blanchett]

URL: http://beta.ausstage.edu.au/mapping3/markers?type=contributor&id=482,4921

{{{
[ { "id" : 4921,
    "venues" : [ { "id" : "302",
          "latitude" : "-34.919681",
          "longitude" : "138.597095",
          "name" : "The Space",
          "postcode" : "5000",
          "street" : "Adelaide Festival Centre,King William Street",
          "suburb" : "Adelaide",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=302"
        },
        { "id" : "3",
          "latitude" : "-37.8214040",
          "longitude" : "144.9687240",
          "name" : "Playhouse",
          "postcode" : "3004",
          "street" : "Victorian Arts Centre. 100 St Kilda Rd",
          "suburb" : "Melbourne",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=3"
        },
...
{ "id" : "33",
          "latitude" : "-37.827082",
          "longitude" : "144.96654",
          "name" : "CUB Malthouse",
          "postcode" : "3006",
          "street" : "113 Sturt Street",
          "suburb" : "Southbank",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=33"
        }
      ]
  },
  { "id" : 482,
    "venues" : [ { "id" : "302",
          "latitude" : "-34.919681",
          "longitude" : "138.597095",
          "name" : "The Space",
          "postcode" : "5000",
          "street" : "Adelaide Festival Centre,King William Street",
          "suburb" : "Adelaide",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=302"
        },
        { "id" : "106",
          "latitude" : "-33.751108",
          "longitude" : "150.696716",
          "name" : "Q Theatre",
          "postcode" : "2750",
          "street" : "Railway Street",
          "suburb" : "Penrith",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=106"
        },
...
 { "id" : "98",
          "latitude" : "-37.810308",
          "longitude" : "144.970033",
          "name" : "Comedy Theatre",
          "postcode" : "3000",
          "street" : "240 Exhibition Street",
          "suburb" : "Melbourne",
          "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=98"
        }
      ]
  } ]
}}}