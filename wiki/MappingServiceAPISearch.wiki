#summary Mapping Service API - Search

<h1>Search API</h1>

Components of the MappingService are exposed as an [http://en.wikipedia.org/wiki/Application_programming_interface API]. The intention of the API is to make it easier for developers to customise their own front end interfaces and to split the work equitably amongst the software engineers working on the Aus-e-Stage project. 

The Search API exposes methods and data elements that can be used to search for contributors, organisations, etc. 

_Note 1: During development of the service revisions the API will use a temporary URL which will be changed once the service revisions are complete._

_Note 2: The search interface provided by the mapping service is designed to be supplementary to the existing text based search interface. Once the new !AusStage website is in place this API is expected to be deprecated as the mapping service will be integrated with the new !AusStage website._

<wiki:toc max_depth="3" />

= Base URL =

http://beta.ausstage.edu.au/mapping3/search?

Combining the base URL with the parameters outlined below constructs a call to the API.

= Parameters =

|| *Name* || *Possible Values* || *Optional* || *Default* ||
|| task   || organisation, contributor, venue, event || No || ||
|| type   || name, id     || No || ||
|| query  || the search query || No || ||
|| format || json || Yes || json ||
|| limit  || an integer between 5 and 25 || Yes || 5 ||
|| callback || function name to use for a JSONP request || Yes || || 

== task ==
The type of search task to undertake for example a search for organisation or contributor data

== type ==
The type of search to undertake either by name or by id number

== query ==
The search query, either a list of search terms that must be present in the name or the id number to search for

_Note:_ If a name search is undertaken the query is sanitised by:

 * removing white-space at the start and end of the query
 * remove all occurrences of the words and, or, not

Records containing all of the search terms are returned within the record limit specified

== format ==
The type of data format used to prepare the search results. At the time of writing only [http://en.wikipedia.org/wiki/JSON JSON] is a supported format

== limit ==
The maximum number of result records to be returned. By default only 5 records are returned

== callback ==
The name of the callback function used when a request is made for JSONP encoded data

= Sample Output =

The search result is formatted as a JSON array with zero, one, or more result objects. 

== Organisation ID Search ==

Conduct a search for the organisation with id 102

URL: http://beta.ausstage.edu.au/mapping3/search?task=organisation&type=id&query=102

{{{
[
 {
  "id":"102",
  "totalEventCount":435,
  "mapEventCount":284,
  "name":"Australian Dance Theatre",
  "url":"http:\/\/www.ausstage.edu.au\/indexdrilldown.jsp?xcid=59&amp;f_org_id=102",
  "address":"126 Belair Road"
 }
]
}}}

== Organisation Name Search ==

Conduct a search for organisations that contain the words "australian" and "dance" in their name using the default record limit

URL: http://beta.ausstage.edu.au/mapping3/search?task=organisation&type=name&query=australian+dance

{{{
[ { "id" : "9703",
    "mapEventCount" : 2,
    "name" : "Australian Contemporary Dance Company",
    "totalEventCount" : 2,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_org_id=9703",
    "address":null
  },
  { "id" : "12224",
    "mapEventCount" : 2,
    "name" : "Australian Dance Festival",
    "totalEventCount" : 2,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_org_id=12224",
    "address":null
  },
  { "id" : "30769",
    "mapEventCount" : 1,
    "name" : "Australian Dance Performance Institute",
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_org_id=30769",
    "address":null
  },
  { "id" : "102",
    "mapEventCount" : 303,
    "name" : "Australian Dance Theatre",
    "totalEventCount" : 408,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_org_id=102",
    "address":"126 Belair Road"
  },
  { "id" : "32347",
    "mapEventCount" : 1,
    "name" : "Australian Dance Theatre Academy",
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_org_id=32347",,
    "address":null
  }
]
}}}

== Contributor ID Search ==

A search for the contributor with id 482

URL: http://beta.ausstage.edu.au/mapping3/search?task=contributor&type=id&query=482

{{{
[ { "eventDates" : "1970 - 2010",
    "firstName" : "Geoffrey",
    "functions" : [ "Actor",
        "Director",
        "Adaptor",
        "Performer"
      ],
    "id" : "482",
    "lastName" : "Rush",
    "mapEventCount" : 70,
    "totalEventCount" : 81,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=482"
  } ]
}}}

== Contributor Name Search ==
A search for any contributors with "cate" in their name, specifying a limit of 10 records returned

URL: http://beta.ausstage.edu.au/mapping3/search?task=contributor&type=name&query=cate&limit=10

{{{
[ { "eventDates" : "1980",
    "firstName" : "Anthony",
    "functions" : [ "Set and / or Property Maker" ],
    "id" : "402671",
    "lastName" : "Mascatello",
    "mapEventCount" : 1,
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=402671"
  },
  { "eventDates" : "1935",
    "firstName" : "B.W.",
    "functions" : [ "Conductor",
        "Musical Director"
      ],
    "id" : "405906",
    "lastName" : "Caten",
    "mapEventCount" : 1,
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=405906"
  },
  { "eventDates" : "1989 - 2010",
    "firstName" : "Cate",
    "functions" : [ "Actor",
        "Director"
      ],
    "id" : "4921",
    "lastName" : "Blanchett",
    "mapEventCount" : 24,
    "totalEventCount" : 31,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=4921"
  },
  { "eventDates" : "1984",
    "firstName" : "Cate",
    "functions" : [ "Actor" ],
    "id" : "227811",
    "lastName" : "Brennan",
    "mapEventCount" : 1,
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=227811"
  },
  { "eventDates" : "1996",
    "firstName" : "Cate",
    "functions" : [ "Actor" ],
    "id" : "246522",
    "lastName" : "Crowe",
    "mapEventCount" : 0,
    "totalEventCount" : 2,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=246522"
  },
  { "eventDates" : "2003",
    "firstName" : "Cate",
    "functions" : [ "Director" ],
    "id" : "258170",
    "lastName" : "Dunn",
    "mapEventCount" : 1,
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=258170"
  },
  { "eventDates" : "1968 - 2008",
    "firstName" : "Cate",
    "functions" : [ "Producer" ],
    "id" : "245256",
    "lastName" : "Fowler",
    "mapEventCount" : 34,
    "totalEventCount" : 38,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=245256"
  },
  { "eventDates" : "2001",
    "firstName" : "Cate",
    "functions" : [ "Playwright" ],
    "id" : "6900",
    "lastName" : "Furey",
    "mapEventCount" : 0,
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=6900"
  },
  { "eventDates" : "1994",
    "firstName" : "Cate",
    "functions" : [ "Dancer" ],
    "id" : "252341",
    "lastName" : "Handley",
    "mapEventCount" : 1,
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=252341"
  },
  { "eventDates" : "1987",
    "firstName" : "Cate",
    "functions" : [ "Dramaturg" ],
    "id" : "245142",
    "lastName" : "Kennedy",
    "mapEventCount" : 1,
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_contrib_id=245142"
  }
]

}}}

== Venue ID Search ==

A search for the venue with id 815

URL: http://beta.ausstage.edu.au/mapping3/search?task=venue&type=id&query=815

{{{
[ { "id" : "815",
    "latitude" : "-34.92832",
    "longitude" : "138.597007",
    "name" : "Her Majesty's Theatre",
    "postcode" : "5000",
    "street" : "58 Grote Street",
    "suburb" : "Adelaide",
    "totalEventCount" : 312,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=815"
  } ]
}}}

== Venue Name Search ==

A search for any venue with the words "her" and "majesty's" and "theatre" specifying the maximum record limit

URL: http://beta.ausstage.edu.au/mapping3/search?task=venue&type=name&query=her+majesty%27s+theatre&limit=25

{{{
[ { "id" : "11093",
    "latitude" : "-37.810916",
    "longitude" : "144.969755",
    "name" : "Alexandra Theatre",
    "postcode" : "3000",
    "street" : "219 Exhibition Street",
    "suburb" : "Melbourne",
    "totalEventCount" : 5,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=11093"
  },
  { "id" : "2778",
    "latitude" : "-27.469146",
    "longitude" : "153.025862",
    "name" : "Her Majesty's Theatre",
    "postcode" : "4000",
    "street" : "197 Queen Street",
    "suburb" : "Brisbane",
    "totalEventCount" : 121,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=2778"
  },
  { "id" : "76",
    "latitude" : "-37.810916",
    "longitude" : "144.969755",
    "name" : "Her Majesty's Theatre",
    "postcode" : "3000",
    "street" : "219 Exhibition Street",
    "suburb" : "Melbourne",
    "totalEventCount" : 186,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=76"
  },
  { "id" : "815",
    "latitude" : "-34.92832",
    "longitude" : "138.597007",
    "name" : "Her Majesty's Theatre",
    "postcode" : "5000",
    "street" : "58 Grote Street",
    "suburb" : "Adelaide",
    "totalEventCount" : 314,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=815"
  },
  { "id" : "13496",
    "latitude" : null,
    "longitude" : null,
    "name" : "Her Majesty's Theatre",
    "postcode" : null,
    "street" : null,
    "suburb" : "Haymarket",
    "totalEventCount" : 2,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=13496"
  },
  { "id" : "13477",
    "latitude" : "-31.954748",
    "longitude" : "115.856495",
    "name" : "Her Majesty's Theatre",
    "postcode" : "6000",
    "street" : null,
    "suburb" : "Perth",
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=13477"
  },
  { "id" : "11904",
    "latitude" : "-33.870577",
    "longitude" : "151.208483",
    "name" : "Her Majesty's Theatre (1887-1933)",
    "postcode" : "2000",
    "street" : "Pitt St",
    "suburb" : "Sydney",
    "totalEventCount" : 17,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=11904"
  },
  { "id" : "23",
    "latitude" : null,
    "longitude" : null,
    "name" : "Her Majesty's Theatre (1960-2001)",
    "postcode" : "2000",
    "street" : "Quay Street",
    "suburb" : "Sydney",
    "totalEventCount" : 193,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=23"
  },
  { "id" : "143",
    "latitude" : "-37.56269",
    "longitude" : "143.857598",
    "name" : "Her Majestys ",
    "postcode" : "3350",
    "street" : "17 Lydiard Street South",
    "suburb" : "Ballarat",
    "totalEventCount" : 56,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=143"
  },
  { "id" : "3238",
    "latitude" : "-36.847928",
    "longitude" : "174.765134",
    "name" : "His Majesty's Theatre",
    "postcode" : null,
    "street" : "1902 Durham St West ",
    "suburb" : "Auckland",
    "totalEventCount" : 8,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=3238"
  },
  { "id" : "2798",
    "latitude" : "-27.4688022",
    "longitude" : "153.0263346",
    "name" : "His Majesty's Theatre",
    "postcode" : "4000",
    "street" : "193 Queen Street",
    "suburb" : "Brisbane",
    "totalEventCount" : 64,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=2798"
  },
  { "id" : "10985",
    "latitude" : "-37.810916",
    "longitude" : "144.96975",
    "name" : "His Majesty's Theatre",
    "postcode" : "3000",
    "street" : "219 Exhibition Street",
    "suburb" : "Melbourne",
    "totalEventCount" : 87,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=10985"
  },
  { "id" : "13425",
    "latitude" : "-45.880206",
    "longitude" : "170.502266",
    "name" : "His Majesty's Theatre",
    "postcode" : null,
    "street" : "65 Crawford Street",
    "suburb" : "Dunedin",
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=13425"
  },
  { "id" : "355",
    "latitude" : "-31.953078",
    "longitude" : "115.854439",
    "name" : "His Majesty's Theatre",
    "postcode" : "6000",
    "street" : "825 Hay Street",
    "suburb" : "Perth",
    "totalEventCount" : 199,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=355"
  },
  { "id" : "4353",
    "latitude" : "57.147875",
    "longitude" : "-2.105373",
    "name" : "His Majesty's Theatre",
    "postcode" : null,
    "street" : "Rosemount Viaduct",
    "suburb" : "Aberdeen",
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=4353"
  },
  { "id" : "10408",
    "latitude" : null,
    "longitude" : null,
    "name" : "His Majesty's Theatre ",
    "postcode" : null,
    "street" : null,
    "suburb" : "London",
    "totalEventCount" : 1,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=10408"
  },
  { "id" : "3853",
    "latitude" : "-34.92832",
    "longitude" : "138.597007",
    "name" : "Prince of Wales Theatre",
    "postcode" : "5000",
    "street" : "58 Grote Street",
    "suburb" : "Adelaide",
    "totalEventCount" : 3,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=3853"
  },
  { "id" : "2965",
    "latitude" : "-34.92832",
    "longitude" : "138.597007",
    "name" : "Tivoli Theatre",
    "postcode" : "5000",
    "street" : "58 Grote Street",
    "suburb" : "Adelaide",
    "totalEventCount" : 68,
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_venue_id=2965"
  }
]
}}}

== Event ID Search ==
Conduct a search for the event with the id 71254

URL: http://beta.ausstage.edu.au/mapping3/search?task=event&type=id&query=71254

{{{
[ { "firstDate" : "2007-06-17",
    "firstDisplayDate" : "17 June 2007",
    "id" : "71254",
    "latitude" : "-34.919681",
    "longitude" : "138.597095",
    "name" : "Shane Warne: the Musical ",
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=71254",
    "venueid" : "10806"
  } ]
}}}

== Event Name Search ==

Conduct a search for events with the words "shane" and "warne" in the event name

URL: http://beta.ausstage.edu.au/mapping3/search?task=event&type=name&query=shane+warne

{{{
[ { "firstDate" : "2008-03-21",
    "firstDisplayDate" : "21 March 2008",
    "id" : "85842",
    "latitude" : "-37.814725",
    "longitude" : "144.965902",
    "name" : "Shane Warne The Musical: A Work In Progress",
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=85842",
    "venueid" : "655"
  },
  { "firstDate" : "2008-12-10",
    "firstDisplayDate" : "10 December 2008",
    "id" : "80487",
    "latitude" : "-37.815039",
    "longitude" : "144.967359",
    "name" : "Shane Warne: the Musical ",
    "url" : "http://www.ausstage.edu.au/indexdrilldown.jsp?xcid=59&amp;f_event_id=80487",
    "venueid" : "83"
  }
]
}}}