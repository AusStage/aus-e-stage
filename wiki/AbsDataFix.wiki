#summary How to build overlays using ABS Data

<h1>!AbsDataFix - Building Map Overlays using ABS Data</h1>

The AbsDataFix application has been designed to provide a flexible framework for the manipulation of data sourced from the [http://www.abs.gov.au Australian Bureau of Statistics (ABS)] on the 2006 census. 

The data is manipulated in a variety of different ways to build overlays for use with [http://earth.google.com Google Earth] and other GIS enabled systems. Datasets are also constructed so that the [http://beta.ausstage.edu.au/mapping/ AusStage Mapping Service] can be used to dynamically populate the infoWindows in each overlay.

Outlined below are the steps necessary to use the AbsDataFix application to prepare a dataset sourced from the ABS using the SourcingAbsData procedure.

_Note 1: This procedure assumes that you are familiar with executing commands in a command line environment such as a terminal or command prompt window_

_Note 2: Ensure that all file and directory names do not include spaces_

<wiki:toc max_depth="2" />

= Step 1. Prepare your System =
 # Ensure that you have the latest version of [http://java.com Java] installed and properly configured on your system. The AbsDataFix application was written using Java version 1.6.
 # To assist in following these procedures it is recommended that you create a directory structure that starts with an *abs-data-fix* directory and has the following child directories
  # *bin* for storing the executable
  # *input* for storing the input files
  # *output* for storing the output files
  # *repository* for storing finalised files

= Step 2. Download and install the !AbsDataFix application =
 # Enter the following URL into the address bar of your browser http://code.google.com/p/aus-e-stage/
 # Download the !AbsDataFix-#.zip file listed under the *Featured Downloads* heading where # is the version number
 # Extract the contents of the archive and and copy them into the *bin* directory created in step 1

= Step 3. Building First Stage XML File = 
 # Choose one of the following steps to create the required dataset

== Step 3a. Build an Age by Sex Dataset ==
 # Copy the file downloaded at the end of the SourcingAbsData procedure into the *input* directory 
 # Ensure the file name does not contain any spaces and is all lower case
 # Open a terminal window / command prompt
 # Change directory to the *bin* directory 
 # Execute the following command where:
   # input-file: is the source data copied to the input directory in step 3a.1
   # output-file: is the name of the output XML file to create _Note: Specify the *output* directory as part of the path_
   {{{java -jar AbsDataFix.jar -fixtype agebysex -input input-file -output output-file}}}
 # If an error occurs adjust the parameters and try again
 # Take note of the file that was successfully created

= Step 4. Start a Collection District Dataset =
Collection District Dataset is an XML based file that is used for further processing and for use by the !AusStage Mapping Service for the population of infoWindows in Google Earth.

This step will only needed to be undertaken once for each state using the Age by Sex Dataset created in step 3a.

 # Copy the XML file created in step 3a into the *input* directory
 # If necessary, open a terminal window / command prompt
 # If necessary, change directory to the *bin* directory 
 # Execute the following command where:
   # input-file: is the file copied to the input directory in step 4.1
   # output-file: is the name of the output XML file to create _Note: Specify the *output* directory as part of the path_
   {{{java -jar AbsDataFix.jar -fixtype databuilder -input input-file -output output-file}}}
 # If an error occurs adjust the parameters and try again
 # Take note of the file that was successfully created